{
  "rules": {
    "tenants": {
      "$tenantId": {
        ".read": "auth != null && (auth.uid == $tenantId || root.child('tenants').child($tenantId).child('users').child(auth.uid).exists())",
        ".write": "auth != null && (auth.uid == $tenantId || root.child('tenants').child($tenantId).child('users').child(auth.uid).child('role').val() == 'admin')",
        
        "settings": {
          ".read": true,
          "payment": {
            "stripe": {
              "secretKey": {
                ".read": "auth != null && auth.uid == $tenantId"
              }
            }
          }
        },
        
        "products": {
          ".read": true,
          ".indexOn": ["category", "available", "position"]
        },
        
        "orders": {
          ".read": "auth != null && (auth.uid == $tenantId || root.child('tenants').child($tenantId).child('users').child(auth.uid).exists())",
          ".write": true,
          ".indexOn": ["status", "timestamp", "date"]
        },
        
        "content": {
          ".read": true
        },
        
        "offers": {
          ".read": true
        }
      }
    },
    
    "public": {
      ".read": true,
      ".write": false
    }
  }
}