<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Eatech - Content Management</title>
    
    <!-- CSS -->
    <link rel="stylesheet" href="css/style.css">
    <link rel="stylesheet" href="css/admin-style.css">
    <link rel="stylesheet" href="css/settings.css">
    <link rel="stylesheet" href="css/cms.css">
    
    <!-- Icons -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    
    <!-- Firebase -->
    <script src="https://www.gstatic.com/firebasejs/9.0.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.0.0/firebase-database-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.0.0/firebase-storage-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.0.0/firebase-auth-compat.js"></script>
    
    <!-- Quill Editor for Rich Text -->
    <link href="https://cdn.quilljs.com/1.3.6/quill.snow.css" rel="stylesheet">
    <script src="https://cdn.quilljs.com/1.3.6/quill.js"></script>
</head>
<body>
    <!-- Admin Navigation -->
    <nav class="admin-nav">
        <div class="nav-brand">
            <i class="fas fa-pizza-slice"></i>
            <span>Eatech Admin</span>
        </div>
        <div class="nav-links">
            <a href="admin-dashboard.html"><i class="fas fa-tachometer-alt"></i> Dashboard</a>
            <a href="admin-orders.html"><i class="fas fa-receipt"></i> Bestellungen</a>
            <a href="admin-products.html"><i class="fas fa-box"></i> Produkte</a>
            <a href="admin-menu-designer.html"><i class="fas fa-palette"></i> Menu Designer</a>
            <a href="admin-settings.html"><i class="fas fa-cog"></i> Einstellungen</a>
            <a href="admin-cms.html" class="active"><i class="fas fa-edit"></i> CMS</a>
            <a href="#" id="logoutBtn"><i class="fas fa-sign-out-alt"></i> Logout</a>
        </div>
    </nav>

    <!-- CMS Container -->
    <div class="cms-container">
        <div class="cms-header">
            <h1><i class="fas fa-edit"></i> Content Management</h1>
            <button class="btn-preview" onclick="previewSite()">
                <i class="fas fa-eye"></i> Vorschau
            </button>
        </div>

        <!-- CMS Sections -->
        <div class="cms-grid">
            
            <!-- Welcome Section -->
            <div class="cms-section">
                <div class="section-header">
                    <h3><i class="fas fa-home"></i> Willkommensbereich</h3>
                    <button class="btn-edit" onclick="editSection('welcome')">
                        <i class="fas fa-pen"></i> Bearbeiten
                    </button>
                </div>
                <div class="section-preview">
                    <h4 id="welcomeTitle">Willkommen bei Ihrem Foodtruck!</h4>
                    <p id="welcomeText">Bestellen Sie bequem online und holen Sie Ihr Essen ab.</p>
                </div>
            </div>

            <!-- About Section -->
            <div class="cms-section">
                <div class="section-header">
                    <h3><i class="fas fa-info-circle"></i> Über Uns</h3>
                    <button class="btn-edit" onclick="editSection('about')">
                        <i class="fas fa-pen"></i> Bearbeiten
                    </button>
                </div>
                <div class="section-preview">
                    <p id="aboutText">Erzählen Sie Ihre Geschichte...</p>
                </div>
            </div>

            <!-- Special Offers -->
            <div class="cms-section">
                <div class="section-header">
                    <h3><i class="fas fa-star"></i> Spezialangebote</h3>
                    <button class="btn-edit" onclick="editSection('offers')">
                        <i class="fas fa-pen"></i> Bearbeiten
                    </button>
                </div>
                <div class="section-preview">
                    <div id="offersList" class="offers-list">
                        <div class="empty-state">
                            <i class="fas fa-tags"></i>
                            <p>Noch keine Angebote erstellt</p>
                        </div>
                    </div>
                    <button class="btn-add" onclick="addOffer()">
                        <i class="fas fa-plus"></i> Neues Angebot
                    </button>
                </div>
            </div>

            <!-- Announcements -->
            <div class="cms-section">
                <div class="section-header">
                    <h3><i class="fas fa-bullhorn"></i> Ankündigungen</h3>
                    <button class="btn-edit" onclick="editSection('announcements')">
                        <i class="fas fa-pen"></i> Bearbeiten
                    </button>
                </div>
                <div class="section-preview">
                    <div id="announcementBanner" class="announcement-banner">
                        <i class="fas fa-info-circle"></i>
                        <span id="announcementText">Keine aktuelle Ankündigung</span>
                    </div>
                    <label class="toggle-switch">
                        <input type="checkbox" id="announcementEnabled">
                        <span class="toggle-slider"></span>
                        <span class="toggle-label">Banner anzeigen</span>
                    </label>
                </div>
            </div>

            <!-- Footer Links -->
            <div class="cms-section">
                <div class="section-header">
                    <h3><i class="fas fa-link"></i> Footer Links</h3>
                    <button class="btn-edit" onclick="editSection('footer')">
                        <i class="fas fa-pen"></i> Bearbeiten
                    </button>
                </div>
                <div class="section-preview">
                    <div id="footerLinks" class="footer-links-preview">
                        <!-- Links werden hier geladen -->
                    </div>
                    <button class="btn-add" onclick="addFooterLink()">
                        <i class="fas fa-plus"></i> Link hinzufügen
                    </button>
                </div>
            </div>

            <!-- SEO Settings -->
            <div class="cms-section">
                <div class="section-header">
                    <h3><i class="fas fa-search"></i> SEO Einstellungen</h3>
                    <button class="btn-edit" onclick="editSection('seo')">
                        <i class="fas fa-pen"></i> Bearbeiten
                    </button>
                </div>
                <div class="section-preview seo-preview">
                    <div class="seo-item">
                        <label>Seitentitel</label>
                        <p id="seoTitle">Mein Foodtruck - Online bestellen</p>
                    </div>
                    <div class="seo-item">
                        <label>Beschreibung</label>
                        <p id="seoDescription">Die besten Burger der Stadt...</p>
                    </div>
                    <div class="seo-item">
                        <label>Keywords</label>
                        <p id="seoKeywords">foodtruck, burger, essen, bestellen</p>
                    </div>
                </div>
            </div>

            <!-- Product Descriptions AI -->
            <div class="cms-section full-width">
                <div class="section-header">
                    <h3><i class="fas fa-robot"></i> AI Produktbeschreibungen</h3>
                </div>
                <div class="ai-generator">
                    <p>Lassen Sie die AI automatisch ansprechende Produktbeschreibungen erstellen!</p>
                    <div class="ai-controls">
                        <select id="aiProduct">
                            <option value="">Produkt wählen...</option>
                            <!-- Produkte werden hier geladen -->
                        </select>
                        <select id="aiTone">
                            <option value="professional">Professionell</option>
                            <option value="casual">Locker</option>
                            <option value="enthusiastic">Begeistert</option>
                            <option value="gourmet">Gourmet</option>
                        </select>
                        <button class="btn-ai" onclick="generateDescription()">
                            <i class="fas fa-magic"></i> Beschreibung generieren
                        </button>
                    </div>
                    <div id="aiResult" class="ai-result" style="display: none;">
                        <h4>Generierte Beschreibung:</h4>
                        <p id="aiDescription"></p>
                        <div class="ai-actions">
                            <button onclick="applyAiDescription()" class="btn-apply">
                                <i class="fas fa-check"></i> Übernehmen
                            </button>
                            <button onclick="regenerateDescription()" class="btn-regenerate">
                                <i class="fas fa-redo"></i> Neu generieren
                            </button>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Image Library -->
            <div class="cms-section full-width">
                <div class="section-header">
                    <h3><i class="fas fa-images"></i> Bildergalerie</h3>
                    <button class="btn-upload" onclick="document.getElementById('imageUpload').click()">
                        <i class="fas fa-upload"></i> Bilder hochladen
                    </button>
                    <input type="file" id="imageUpload" multiple accept="image/*" style="display: none;">
                </div>
                <div class="image-gallery" id="imageGallery">
                    <!-- Bilder werden hier geladen -->
                </div>
            </div>

        </div>
    </div>

    <!-- Edit Modal -->
    <div id="editModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2 id="modalTitle">Bereich bearbeiten</h2>
                <button onclick="closeEditModal()" class="close-modal">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <div class="modal-body" id="modalBody">
                <!-- Dynamic content based on section -->
            </div>
            <div class="modal-footer">
                <button onclick="closeEditModal()" class="btn-secondary">Abbrechen</button>
                <button onclick="saveSection()" class="btn-primary">Speichern</button>
            </div>
        </div>
    </div>

    <!-- Offer Modal -->
    <div id="offerModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2>Angebot erstellen</h2>
                <button onclick="closeOfferModal()" class="close-modal">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <div class="modal-body">
                <div class="form-group">
                    <label>Angebotstitel *</label>
                    <input type="text" id="offerTitle" placeholder="z.B. Happy Hour">
                </div>
                <div class="form-group">
                    <label>Beschreibung *</label>
                    <textarea id="offerDescription" rows="3" placeholder="Beschreiben Sie das Angebot..."></textarea>
                </div>
                <div class="form-grid">
                    <div class="form-group">
                        <label>Rabatt</label>
                        <input type="text" id="offerDiscount" placeholder="z.B. 20% oder CHF 5">
                    </div>
                    <div class="form-group">
                        <label>Gültig bis</label>
                        <input type="date" id="offerValidUntil">
                    </div>
                </div>
                <div class="form-group">
                    <label>Bedingungen</label>
                    <input type="text" id="offerConditions" placeholder="z.B. Mindestbestellwert CHF 30">
                </div>
                <div class="form-group">
                    <label class="toggle-switch">
                        <input type="checkbox" id="offerActive" checked>
                        <span class="toggle-slider"></span>
                        <span class="toggle-label">Angebot aktiv</span>
                    </label>
                </div>
            </div>
            <div class="modal-footer">
                <button onclick="closeOfferModal()" class="btn-secondary">Abbrechen</button>
                <button onclick="saveOffer()" class="btn-primary">Speichern</button>
            </div>
        </div>
    </div>

    <!-- Toast Notifications -->
    <div id="toast" class="toast"></div>

    <!-- Scripts -->
    <script>
        // Firebase Configuration
            const firebaseConfig = {
  apiKey: "AIzaSyDFBlgWE81iHnACVwOmaU0jL7FV0l_tRmU",
  authDomain: "eatech-foodtruck.firebaseapp.com",
  databaseURL: "https://eatech-foodtruck-default-rtdb.europe-west1.firebasedatabase.app",
  projectId: "eatech-foodtruck",
  storageBucket: "eatech-foodtruck.firebasestorage.app",
  messagingSenderId: "261222802445",
  appId: "1:261222802445:web:edde22580422fbced22144",
        };
        
        firebase.initializeApp(firebaseConfig);
        const database = firebase.database();
        const storage = firebase.storage();
        const auth = firebase.auth();
    </script>
    <script src="js/cms.js"></script>
    <script src="js/ai-product-descriptions.js"></script>
</body>
</html>